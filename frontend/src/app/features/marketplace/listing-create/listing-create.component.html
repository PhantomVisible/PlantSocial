<div class="create-container">
    <div class="header">
        <a routerLink="/marketplace" class="back-link">
            <i class="pi pi-arrow-left"></i> Back to Marketplace
        </a>
        <h1>List Your Plant Product</h1>
        <p>Share your plant products with the community. $5.00/day visibility fee.</p>
    </div>

    <div class="form-card">
        <form [formGroup]="listingForm" (ngSubmit)="onSubmit()">

            <div class="form-group">
                <label for="productUrl">Product URL (Amazon, eBay, etc.)</label>
                <div class="input-group-row">
                    <input type="url" id="productUrl" formControlName="productUrl" placeholder="Paste link here..."
                        class="form-input">
                    <button type="button" (click)="fetchPreview()"
                        [disabled]="listingForm.get('productUrl')?.invalid || isFetchingPreview" class="preview-btn">
                        <i class="pi" [class.pi-spin]="isFetchingPreview" [class.pi-spinner]="isFetchingPreview"
                            [class.pi-bolt]="!isFetchingPreview"></i>
                        {{ isFetchingPreview ? 'Fetching' : 'Auto-Fill' }}
                    </button>
                </div>
                <small *ngIf="listingForm.get('productUrl')?.invalid && listingForm.get('productUrl')?.touched">
                    Valid URL is required
                </small>
            </div>

            <div class="form-group">
                <label for="title">Title</label>
                <input type="text" id="title" formControlName="title" placeholder="e.g. Variegated Monstera Cutting"
                    class="form-input">
            </div>

            <div class="form-group">
                <label for="imageUrl">Image URL</label>
                <div class="input-with-preview">
                    <input type="url" id="imageUrl" formControlName="imageUrl" placeholder="https://..."
                        class="form-input">
                    <button type="button" (click)="fillMockData()" class="mock-btn" title="Fill Mock Data">
                        <i class="pi pi-bolt"></i> Auto-fill (Demo)
                    </button>
                </div>
            </div>

            <div class="form-group">
                <label for="durationDays">Duration (Days)</label>
                <select id="durationDays" formControlName="durationDays" class="form-input">
                    <option [value]="1">1 Day ($5.00)</option>
                    <option [value]="3">3 Days ($15.00)</option>
                    <option [value]="7">7 Days ($35.00)</option>
                    <option [value]="14">14 Days ($70.00)</option>
                    <option [value]="30">30 Days ($150.00)</option>
                </select>
                <p class="cost-preview">
                    Total Cost: <strong>{{ (listingForm.get('durationDays')?.value || 0) * 5 | currency:'USD'
                        }}</strong>
                </p>
            </div>

            <button type="submit" [disabled]="listingForm.invalid || isSubmitting" class="submit-btn">
                {{ isSubmitting ? 'Creating...' : 'Continue to Payment' }}
            </button>

        </form>
    </div>
</div>